function draw(e,n,t){$("#chart1").empty(),nv.addGraph(function(){return chart=nv.models.lineChart().margin({left:80}).showYAxis(!0).options({transitionDuration:300,useInteractiveGuideline:!0}),chart.xScale(d3.time.scale()),chart.xAxis.axisLabel("Month").ticks(d3.time.months).tickFormat(function(e){return d3.time.format("%Y-%m")(new Date(e))}),chart.yAxis.axisLabel("Count"),d3.select("#chart1").append("svg").datum(generateDataToDraw(e,n,t)).call(chart),nv.utils.windowResize(chart.update),chart},function(){d3.selectAll(".nv-point").on("click",function(e){idx=d3.time.format("%Y-%m")(new Date(e.x)),console.log(idx),$.cookie("idx",idx)})})}function sent_count(e,n,t){var a=t,o=0,l=0,r=0;if(void 0==a)if(void 0==n){for(c in e)"name"!=c&&(o+=e[c].neutral.length,l+=e[c].pos.length,r+=e[c].neg.length);console.log(o),console.log(l),console.log(r)}else{for(c in e)if("name"!=c){for(var i=0;i<e[c].neutral.length;i++)-1!=e[c].neutral[i][1].search(new RegExp(n,"i"))&&(o+=1);for(var i=0;i<e[c].pos.length;i++)-1!=e[c].pos[i][1].search(new RegExp(n,"i"))&&(l+=1);for(var i=0;i<e[c].neg.length;i++)-1!=e[c].neg[i][1].search(new RegExp(n,"i"))&&(r+=1)}console.log(o),console.log(l),console.log(r)}else{if(void 0==n)a in e&&(o+=e[a].neutral.length,l+=e[a].pos.length,r+=e[a].neg.length);else if(a in e){for(var i=0;i<e[a].neutral.length;i++)-1!=e[a].neutral[i][1].search(new RegExp(n,"i"))&&(o+=1);for(var i=0;i<e[a].pos.length;i++)-1!=e[a].pos[i][1].search(new RegExp(n,"i"))&&(l+=1);for(var i=0;i<e[a].neg.length;i++)-1!=e[a].neg[i][1].search(new RegExp(n,"i"))&&(r+=1)}console.log(o),console.log(l),console.log(r)}var h={neu:o,pos:l,neg:r};return h}function show_tweet(e,n,t,a){if(tweet_array=[],m=void 0==a?"2015-02":a,m in e)if(void 0==n)if(void 0==t)for(label in e[m])for(var o=0;o<e[m][label].length;o++)tweet_array.push([e[m][label][o][1],e[m][label][o][2]]);else for(var o=0;o<e[m][t].length;o++)tweet_array.push([e[m][t][o][1],e[m][t][o][2]]);else if(void 0==t)for(var o=0;o<e[m][label].length;o++)-1!=e[m][label][o][1].search(new RegExp(n,"i"))&&tweet_array.push([e[m][label][o][1],e[m][label][o][2]]);else for(var o=0;o<e[m][t].length;o++)-1!=e[m][t][o][1].search(new RegExp(n,"i"))&&tweet_array.push([e[m][t][o][1],e[m][t][o][2]]);return console.log(tweet_array),tweet_array}function generateDataToDraw(e,n,t){v=[];for(var a=0;a<month.length;a++){if(temp={},temp.x=month_new[a],count=0,void 0==t){if(void 0!=e[month[a]])for(label in e[month[a]])if(void 0==n)count+=e[month[a]][label].length;else for(var o=0;o<e[month[a]][label].length;o++)-1!=e[month[a]][label][o][1].search(new RegExp(n,"i"))&&(count+=1)}else if(void 0!=e[month[a]])if(void 0==n)count+=e[month[a]][t].length;else for(var o=0;o<e[month[a]][t].length;o++)-1!=e[month[a]][t][o][1].search(new RegExp(n,"i"))&&(count+=1);temp.y=count,v.push(temp)}return[{values:v,key:e.name}]}var chart,idx;idx="2015-02",month=["2014-01","2014-02","2014-03","2014-04","2014-05","2014-06","2014-07","2014-08","2014-09","2014-10","2014-11","2014-12","2015-01","2015-02"],month_new=[new Date(2014,0),new Date(2014,1),new Date(2014,2),new Date(2014,3),new Date(2014,4),new Date(2014,5),new Date(2014,6),new Date(2014,7),new Date(2014,8),new Date(2014,9),new Date(2014,10),new Date(2014,11),new Date(2015,0),new Date(2015,1)];